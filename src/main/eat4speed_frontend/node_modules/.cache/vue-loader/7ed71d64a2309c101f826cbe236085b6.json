{"remainingRequest":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\src\\views\\Kunde\\Kunde.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\src\\views\\Kunde\\Kunde.vue","mtime":1619872641751},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJLdW5kZSIsDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5zZWFyY2hTdHJpbmcgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnNlYXJjaFN0cmluZzsNCiAgICBjb25zb2xlLmxvZyh0aGlzLnNlYXJjaFN0cmluZyk7DQoNCiAgICB0aGlzLmxvYWRHZXJpY2h0ZSgpOw0KICB9LA0KICBiZWZvcmVSb3V0ZUxlYXZlKHRvLCBmcm9tLCBuZXh0KSB7DQogICAgdGhpcy5zZXRTdG9yZUdlcmljaHRfSUQoKTsNCiAgICBuZXh0KCk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzZWxlY3RHZXJpY2h0KGl0ZW0pIHsNCiAgICAgIGNvbnNvbGUubG9nKCJHZXJpY2h0IHNlbGVjdGVkICIraXRlbS5pZCk7DQogICAgICB0aGlzLnNlbGVjdGVkR2VyaWNodF9JRCA9IGl0ZW0uaWQ7DQogICAgICB0aGlzLnNldFN0b3JlR2VyaWNodF9JRCgpDQogICAgfSwNCiAgICBzZXRTdG9yZVNlYXJjaFN0cmluZygpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiY2hhbmdlU2VhcmNoU3RyaW5nIix0aGlzLnNlYXJjaFN0cmluZyk7DQogICAgICBjb25zb2xlLmxvZygiY2hhbmdlZCBzZWFyY2hTdHJpbmcgdG8gIit0aGlzLiRzdG9yZS5nZXR0ZXJzLnNlYXJjaFN0cmluZyk7DQogICAgfSwNCiAgICBzZXRTdG9yZUdlcmljaHRfSUQoKSB7DQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImNoYW5nZUdlcmljaHRfSUQiLHRoaXMuc2VsZWN0ZWRHZXJpY2h0X0lEKTsNCiAgICAgIGNvbnNvbGUubG9nKCJjaGFuZ2VkIGdlcmljaHRfSUQgdG8gIit0aGlzLiRzdG9yZS5nZXR0ZXJzLmdlcmljaHRfSUQpOw0KICAgIH0sDQogICAgYXN5bmMgbG9hZEdlcmljaHRlKCkgew0KICAgICAgdGhpcy5zZXRTdG9yZVNlYXJjaFN0cmluZygpOw0KICAgICAgY29uc3QgUmVzcG9uc2VHZXJpY2h0ZSA9IGF3YWl0IGF4aW9zLmdldCgiR2VyaWNodC9nZXRHZXJpY2h0RGF0YUJ5R2VyaWNodE5hbWUvIiArIHRoaXMuc2VhcmNoU3RyaW5nKTsNCg0KICAgICAgY29uc29sZS5sb2coUmVzcG9uc2VHZXJpY2h0ZSk7DQoNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgUmVzcG9uc2VHZXJpY2h0ZS5kYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBnZXJpY2h0RGF0YSA9IFJlc3BvbnNlR2VyaWNodGUuZGF0YVtpXTsNCg0KICAgICAgICB0aGlzLmdlcmljaHRfSURzW2ldID0gZ2VyaWNodERhdGFbMF07DQogICAgICAgIHRoaXMubmFtZXNbaV0gPSBnZXJpY2h0RGF0YVsxXTsNCiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbnNbaV0gPSBnZXJpY2h0RGF0YVsyXTsNCiAgICAgICAgdGhpcy5wcmljZXNbaV0gPSBnZXJpY2h0RGF0YVszXTsNCg0KICAgICAgICBpZihnZXJpY2h0RGF0YVs0XSA9PT0gMCkNCiAgICAgICAgew0KICAgICAgICAgIHRoaXMuYXZhaWxhYmlsaXRpZXNbaV0gPSAibmljaHQgdmVyZsO8Z2JhciI7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgdGhpcy5hdmFpbGFiaWxpdGllc1tpXSA9ICJ2ZXJmw7xnYmFyIjsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnJlc3RhdXJhbnRfSURzW2ldID0gZ2VyaWNodERhdGFbNV07DQogICAgICAgIHRoaXMucmVzdGF1cmFudG5hbWVuW2ldID0gZ2VyaWNodERhdGFbNl07DQogICAgICAgIHRoaXMubWluaW11bXNbaV0gPSBnZXJpY2h0RGF0YVs3XTsNCiAgICAgIH0NCg0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBSZXNwb25zZUdlcmljaHRlLmRhdGEubGVuZ3RoOyBpKyspDQogICAgICB7DQogICAgICAgIGNvbnN0IGNvbmZpZyA9IHsgcmVzcG9uc2VUeXBlOiJhcnJheWJ1ZmZlciIgfTsNCiAgICAgICAgY29uc3QgcmVzcG9uc2VQaWN0dXJlID0gYXdhaXQgYXhpb3MuZ2V0KCIvR2VyaWNodEJpbGRlci9nZXRCaWxkLyIrdGhpcy5nZXJpY2h0X0lEc1tpXSxjb25maWcpOw0KDQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlUGljdHVyZSk7DQoNCiAgICAgICAgaWYocmVzcG9uc2VQaWN0dXJlLnN0YXR1cyAhPT0gMjA0KQ0KICAgICAgICB7DQogICAgICAgICAgY29uc29sZS5sb2coInJlY2VpdmVkIFBpY3R1cmUiKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlUGljdHVyZS5kYXRhKTsNCg0KICAgICAgICAgIGxldCBwaWN0dXJlQmxvYiA9IG5ldyBCbG9iKFtyZXNwb25zZVBpY3R1cmUuZGF0YV0sIHsgdHlwZSA6IHJlc3BvbnNlUGljdHVyZS5oZWFkZXJzWyJjb250ZW50LXR5cGUiXX0pDQoNCiAgICAgICAgICBsZXQgaW1hZ2VVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHBpY3R1cmVCbG9iKTsNCiAgICAgICAgICBjb25zb2xlLmxvZyhpbWFnZVVSTCk7DQoNCiAgICAgICAgICB0aGlzLmltZ3NbaV0gPSBpbWFnZVVSTDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICB0aGlzLmltZ3NbaV0gPSAiIjsNCiAgICAgICAgfQ0KDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmltZ3MpOw0KICAgICAgdGhpcy5hbW91bnRHZXJpY2h0ZSA9IDA7DQogICAgICB0aGlzLmFtb3VudEdlcmljaHRlID0gUmVzcG9uc2VHZXJpY2h0ZS5kYXRhLmxlbmd0aDsNCiAgICAgIHRoaXMudmVyc2lvbisrOw0KICAgIH0sDQogIH0sDQogIGRhdGE6ICgpID0+ICh7DQogICAgc2VhcmNoU3RyaW5nOiAiIiwNCiAgICBhbW91bnRHZXJpY2h0ZTogNCwNCiAgICBzZWxlY3RlZEdlcmljaHRfSUQ6ICIiLA0KICAgIHZlcnNpb246IDAsDQogICAgZ2VyaWNodF9JRHM6IFtdLA0KICAgIG5hbWVzOiBbXSwNCiAgICBkZXNjcmlwdGlvbnM6IFtdLA0KICAgIHByaWNlczogW10sDQogICAgaW1nczogW10sDQogICAgcmVzdGF1cmFudF9JRHM6IFtdLA0KICAgIHJlc3RhdXJhbnRuYW1lbjpbXSwNCiAgICBkaXN0YW5jZXM6IFtdLA0KICAgIG1pbmltdW1zOiBbXSwNCiAgICBhdmFpbGFiaWxpdGllczogW10NCiAgfSksDQogIGNvbXB1dGVkOiB7DQogICAgaXRlbXMoKXsNCiAgICAgIGxldCBpID0gMA0KICAgICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMuYW1vdW50R2VyaWNodGV9LCAoKSA9PiB7DQogICAgICAgIGNvbnN0IGNpZCA9IHRoaXMuZ2VyaWNodF9JRHNbaV0NCiAgICAgICAgY29uc3QgY25hbWUgPSB0aGlzLm5hbWVzW2ldDQogICAgICAgIGNvbnN0IGNkZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25zW2ldDQogICAgICAgIGNvbnN0IGNwcmljZSA9IHRoaXMucHJpY2VzW2ldDQogICAgICAgIGNvbnN0IGNpbWcgPSB0aGlzLmltZ3NbaV0NCiAgICAgICAgY29uc3QgY3Jlc3RhdXJhbnRpZCA9IHRoaXMucmVzdGF1cmFudF9JRHNbaV0NCiAgICAgICAgY29uc3QgY3Jlc3RhdXJhbnRuYW1lID0gdGhpcy5yZXN0YXVyYW50bmFtZW5baV0NCiAgICAgICAgY29uc3QgY2Rpc3RhbmNlID0gdGhpcy5kaXN0YW5jZXNbaV0NCiAgICAgICAgY29uc3QgY21pbmltdW0gPSB0aGlzLm1pbmltdW1zW2ldDQogICAgICAgIGNvbnN0IGNhdmFpbGFibGUgPSB0aGlzLmF2YWlsYWJpbGl0aWVzW2ldDQogICAgICAgIGkrKzsNCg0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgIGlkOiBjaWQsDQogICAgICAgICAgbmFtZTogY25hbWUsDQogICAgICAgICAgZGVzY3JpcHRpb246IGNkZXNjcmlwdGlvbiwNCiAgICAgICAgICBwcmljZTogY3ByaWNlLA0KICAgICAgICAgIGltZzogY2ltZywNCiAgICAgICAgICByZXN0YXVyYW50aWQ6IGNyZXN0YXVyYW50aWQsDQogICAgICAgICAgcmVzdGF1cmFudDogY3Jlc3RhdXJhbnRuYW1lLA0KICAgICAgICAgIGRpc3RhbmNlOiBjZGlzdGFuY2UsDQogICAgICAgICAgbWluaW11bTogY21pbmltdW0sDQogICAgICAgICAgYXZhaWxhYmxlOiBjYXZhaWxhYmxlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Kunde.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Kunde.vue","sourceRoot":"src/views/Kunde","sourcesContent":["<template>\r\n  <v-main>\r\n    <v-container>\r\n      <v-container>\r\n        <v-container>\r\n          <v-text-field placeholder=\"Suche...\" autofocus clearable\r\n            v-model=\"searchString\"\r\n          ></v-text-field>\r\n          <v-btn\r\n            @click=\"loadGerichte\"\r\n          >Suchen</v-btn>\r\n        </v-container>\r\n        <v-btn>Gericht</v-btn>\r\n        <v-btn>Umgebung</v-btn>\r\n      </v-container>\r\n      <v-divider></v-divider>\r\n      <v-container>\r\n        <v-card class=\"mx-auto\">\r\n          <v-card-title> Gerichte </v-card-title>\r\n          <v-divider></v-divider>\r\n          <v-virtual-scroll\r\n              :items=\"items\"\r\n              :item-height=\"300\"\r\n              max-height=\"600\"\r\n          >\r\n            <template v-slot:default=\"{ item }\" v-resize>\r\n              <v-list-item v-resize :key=\"version\">\r\n                <v-list-item-content>\r\n                  <v-img alt=\"Bild von Essen\" max-height=\"300\" max-width=\"300\" position=\"center center\" :src=\"item.img\"></v-img>\r\n                </v-list-item-content>\r\n                <v-list-item-content>\r\n                  <v-list-item-group align=\"left\">\r\n                    <v-list-item-title>{{ item.name }}</v-list-item-title>\r\n                    <v-list-item-subtitle>{{ item.description }}</v-list-item-subtitle>\r\n                    <br>\r\n                    <br>\r\n                    <v-list-item-content>{{item.restaurant}}</v-list-item-content>\r\n                    <v-list-item-content>Entfernung: {{item.distance}} km</v-list-item-content>\r\n                    <v-list-item-content>Verfügbar: {{item.available}}</v-list-item-content>\r\n                  </v-list-item-group>\r\n                </v-list-item-content>\r\n                <v-list-item-content></v-list-item-content>\r\n                <v-list-item-group align=\"center\">\r\n                  <v-list-item-content>\r\n                    Preis: {{ item.price}}\r\n                    <br>\r\n                    Mindestbestellwert: {{item.minimum}} €\r\n                  </v-list-item-content>\r\n                  <v-rating readonly length=\"5\" half-icon=\"$ratingHalf\" half-increments hover=\"true\" dense small :value=\"item.rating\"></v-rating>\r\n                  <br>\r\n                  <v-btn small=\"true\" bottom=\"bottom\" @mouseover=\"selectGericht(item)\" :to=\"{name: 'dish'}\">Bestellen</v-btn>\r\n                </v-list-item-group>\r\n              </v-list-item>\r\n              <v-divider></v-divider>\r\n            </template>\r\n          </v-virtual-scroll>\r\n        </v-card>\r\n      </v-container>\r\n    </v-container>\r\n  </v-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"Kunde\",\r\n  mounted() {\r\n    this.searchString = this.$store.getters.searchString;\r\n    console.log(this.searchString);\r\n\r\n    this.loadGerichte();\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    this.setStoreGericht_ID();\r\n    next();\r\n  },\r\n  methods: {\r\n    selectGericht(item) {\r\n      console.log(\"Gericht selected \"+item.id);\r\n      this.selectedGericht_ID = item.id;\r\n      this.setStoreGericht_ID()\r\n    },\r\n    setStoreSearchString() {\r\n      this.$store.commit(\"changeSearchString\",this.searchString);\r\n      console.log(\"changed searchString to \"+this.$store.getters.searchString);\r\n    },\r\n    setStoreGericht_ID() {\r\n      this.$store.commit(\"changeGericht_ID\",this.selectedGericht_ID);\r\n      console.log(\"changed gericht_ID to \"+this.$store.getters.gericht_ID);\r\n    },\r\n    async loadGerichte() {\r\n      this.setStoreSearchString();\r\n      const ResponseGerichte = await axios.get(\"Gericht/getGerichtDataByGerichtName/\" + this.searchString);\r\n\r\n      console.log(ResponseGerichte);\r\n\r\n      for (let i = 0; i < ResponseGerichte.data.length; i++) {\r\n        let gerichtData = ResponseGerichte.data[i];\r\n\r\n        this.gericht_IDs[i] = gerichtData[0];\r\n        this.names[i] = gerichtData[1];\r\n        this.descriptions[i] = gerichtData[2];\r\n        this.prices[i] = gerichtData[3];\r\n\r\n        if(gerichtData[4] === 0)\r\n        {\r\n          this.availabilities[i] = \"nicht verfügbar\";\r\n        }\r\n        else\r\n        {\r\n          this.availabilities[i] = \"verfügbar\";\r\n        }\r\n        this.restaurant_IDs[i] = gerichtData[5];\r\n        this.restaurantnamen[i] = gerichtData[6];\r\n        this.minimums[i] = gerichtData[7];\r\n      }\r\n\r\n      for (let i = 0; i < ResponseGerichte.data.length; i++)\r\n      {\r\n        const config = { responseType:\"arraybuffer\" };\r\n        const responsePicture = await axios.get(\"/GerichtBilder/getBild/\"+this.gericht_IDs[i],config);\r\n\r\n        console.log(responsePicture);\r\n\r\n        if(responsePicture.status !== 204)\r\n        {\r\n          console.log(\"received Picture\")\r\n          console.log(responsePicture.data);\r\n\r\n          let pictureBlob = new Blob([responsePicture.data], { type : responsePicture.headers[\"content-type\"]})\r\n\r\n          let imageURL = URL.createObjectURL(pictureBlob);\r\n          console.log(imageURL);\r\n\r\n          this.imgs[i] = imageURL;\r\n        }\r\n        else\r\n        {\r\n          this.imgs[i] = \"\";\r\n        }\r\n\r\n      }\r\n      console.log(this.imgs);\r\n      this.amountGerichte = 0;\r\n      this.amountGerichte = ResponseGerichte.data.length;\r\n      this.version++;\r\n    },\r\n  },\r\n  data: () => ({\r\n    searchString: \"\",\r\n    amountGerichte: 4,\r\n    selectedGericht_ID: \"\",\r\n    version: 0,\r\n    gericht_IDs: [],\r\n    names: [],\r\n    descriptions: [],\r\n    prices: [],\r\n    imgs: [],\r\n    restaurant_IDs: [],\r\n    restaurantnamen:[],\r\n    distances: [],\r\n    minimums: [],\r\n    availabilities: []\r\n  }),\r\n  computed: {\r\n    items(){\r\n      let i = 0\r\n      return Array.from({ length: this.amountGerichte}, () => {\r\n        const cid = this.gericht_IDs[i]\r\n        const cname = this.names[i]\r\n        const cdescription = this.descriptions[i]\r\n        const cprice = this.prices[i]\r\n        const cimg = this.imgs[i]\r\n        const crestaurantid = this.restaurant_IDs[i]\r\n        const crestaurantname = this.restaurantnamen[i]\r\n        const cdistance = this.distances[i]\r\n        const cminimum = this.minimums[i]\r\n        const cavailable = this.availabilities[i]\r\n        i++;\r\n\r\n        return {\r\n          id: cid,\r\n          name: cname,\r\n          description: cdescription,\r\n          price: cprice,\r\n          img: cimg,\r\n          restaurantid: crestaurantid,\r\n          restaurant: crestaurantname,\r\n          distance: cdistance,\r\n          minimum: cminimum,\r\n          available: cavailable\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}