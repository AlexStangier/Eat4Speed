{"remainingRequest":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\vuex-persist\\dist\\esm\\index.js","dependencies":[{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\vuex-persist\\dist\\esm\\index.js","mtime":499162500000},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\mosab\\IdeaProjects\\Eat4Speed\\src\\main\\eat4speed_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzovVXNlcnMvbW9zYWIvSWRlYVByb2plY3RzL0VhdDRTcGVlZC9zcmMvbWFpbi9lYXQ0c3BlZWRfZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9tb3NhYi9JZGVhUHJvamVjdHMvRWF0NFNwZWVkL3NyYy9tYWluL2VhdDRzcGVlZF9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L1VzZXJzL21vc2FiL0lkZWFQcm9qZWN0cy9FYXQ0U3BlZWQvc3JjL21haW4vZWF0NHNwZWVkX2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvbW9zYWIvSWRlYVByb2plY3RzL0VhdDRTcGVlZC9zcmMvbWFpbi9lYXQ0c3BlZWRfZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IGRlZXBtZXJnZSBmcm9tICdkZWVwbWVyZ2UnOwovKioNCiAqIENyZWF0ZWQgYnkgY2hhbXBpb25zd2ltbWVyIG9uIDIyLzA3LzE3Lg0KICovCgp2YXIgTW9ja1N0b3JhZ2U7IC8vIEB0cy1pZ25vcmUKCnsKICBNb2NrU3RvcmFnZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBNb2NrU3RvcmFnZSgpIHsKICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vY2tTdG9yYWdlKTsKICAgIH0KCiAgICBfY3JlYXRlQ2xhc3MoTW9ja1N0b3JhZ2UsIFt7CiAgICAgIGtleTogImtleSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBrZXkoaW5kZXgpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcylbaW5kZXhdOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInNldEl0ZW0iLAogICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SXRlbShrZXksIGRhdGEpIHsKICAgICAgICB0aGlzW2tleV0gPSBkYXRhLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiZ2V0SXRlbSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtKGtleSkgewogICAgICAgIHJldHVybiB0aGlzW2tleV07CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAicmVtb3ZlSXRlbSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVJdGVtKGtleSkgewogICAgICAgIGRlbGV0ZSB0aGlzW2tleV07CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiY2xlYXIiLAogICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyh0aGlzKTsgX2kgPCBfT2JqZWN0JGtleXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICB2YXIga2V5ID0gX09iamVjdCRrZXlzW19pXTsKICAgICAgICAgIGRlbGV0ZSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImxlbmd0aCIsCiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzKS5sZW5ndGg7CiAgICAgIH0KICAgIH1dKTsKCiAgICByZXR1cm4gTW9ja1N0b3JhZ2U7CiAgfSgpOwp9IC8vIHRzbGludDpkaXNhYmxlOiB2YXJpYWJsZS1uYW1lCgp2YXIgU2ltcGxlUHJvbWlzZVF1ZXVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTaW1wbGVQcm9taXNlUXVldWUoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlUHJvbWlzZVF1ZXVlKTsKCiAgICB0aGlzLl9xdWV1ZSA9IFtdOwogICAgdGhpcy5fZmx1c2hpbmcgPSBmYWxzZTsKICB9CgogIF9jcmVhdGVDbGFzcyhTaW1wbGVQcm9taXNlUXVldWUsIFt7CiAgICBrZXk6ICJlbnF1ZXVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlbnF1ZXVlKHByb21pc2UpIHsKICAgICAgdGhpcy5fcXVldWUucHVzaChwcm9taXNlKTsKCiAgICAgIGlmICghdGhpcy5fZmx1c2hpbmcpIHsKICAgICAgICByZXR1cm4gdGhpcy5mbHVzaFF1ZXVlKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmbHVzaFF1ZXVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmbHVzaFF1ZXVlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5fZmx1c2hpbmcgPSB0cnVlOwoKICAgICAgdmFyIGNoYWluID0gZnVuY3Rpb24gY2hhaW4oKSB7CiAgICAgICAgdmFyIG5leHRUYXNrID0gX3RoaXMuX3F1ZXVlLnNoaWZ0KCk7CgogICAgICAgIGlmIChuZXh0VGFzaykgewogICAgICAgICAgcmV0dXJuIG5leHRUYXNrLnRoZW4oY2hhaW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fZmx1c2hpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNoYWluKCkpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFNpbXBsZVByb21pc2VRdWV1ZTsKfSgpOwoKdmFyIG9wdGlvbnMgPSB7CiAgcmVwbGFjZUFycmF5czogewogICAgYXJyYXlNZXJnZTogZnVuY3Rpb24gYXJyYXlNZXJnZShkZXN0aW5hdGlvbkFycmF5LCBzb3VyY2VBcnJheSwgb3B0aW9ucykgewogICAgICByZXR1cm4gc291cmNlQXJyYXk7CiAgICB9CiAgfSwKICBjb25jYXRBcnJheXM6IHsKICAgIGFycmF5TWVyZ2U6IGZ1bmN0aW9uIGFycmF5TWVyZ2UodGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHRhcmdldC5jb25jYXQuYXBwbHkodGFyZ2V0LCBfdG9Db25zdW1hYmxlQXJyYXkoc291cmNlKSk7CiAgICB9CiAgfQp9OwoKZnVuY3Rpb24gbWVyZ2UoaW50bywgZnJvbSwgbWVyZ2VPcHRpb24pIHsKICByZXR1cm4gZGVlcG1lcmdlKGludG8sIGZyb20sIG9wdGlvbnNbbWVyZ2VPcHRpb25dKTsKfQoKdmFyIEZsYXR0ZWRKU09OID0gSlNPTjsKLyoqDQogKiBBIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgdnVleCBwZXJzaXN0ZW5jZS4NCiAqIEB0eXBlIFMgdHlwZSBvZiB0aGUgJ3N0YXRlJyBpbnNpZGUgdGhlIHN0b3JlIChkZWZhdWx0OiBhbnkpDQogKi8KCnZhciBWdWV4UGVyc2lzdGVuY2UgPQovKioNCiAqIENyZWF0ZSBhIHtAbGluayBWdWV4UGVyc2lzdGVuY2V9IG9iamVjdC4NCiAqIFVzZSB0aGUgPGNvZGU+cGx1Z2luPC9jb2RlPiBmdW5jdGlvbiBvZiB0aGlzIGNsYXNzIGFzIGENCiAqIFZ1ZXggcGx1Z2luLg0KICogQHBhcmFtIHtQZXJzaXN0T3B0aW9uc30gb3B0aW9ucw0KICovCmZ1bmN0aW9uIFZ1ZXhQZXJzaXN0ZW5jZShvcHRpb25zKSB7CiAgdmFyIF90aGlzMiA9IHRoaXM7CgogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWdWV4UGVyc2lzdGVuY2UpOwoKICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6dmFyaWFibGUtbmFtZQogIHRoaXMuX211dGV4ID0gbmV3IFNpbXBsZVByb21pc2VRdWV1ZSgpOwogIC8qKg0KICAgKiBDcmVhdGVzIGEgc3Vic2NyaWJlciBvbiB0aGUgc3RvcmUuIGF1dG9tYXRpY2FsbHkgaXMgdXNlZA0KICAgKiB3aGVuIHRoaXMgaXMgdXNlZCBhIHZ1ZXggcGx1Z2luLiBOb3QgZm9yIG1hbnVhbCB1c2FnZS4NCiAgICogQHBhcmFtIHN0b3JlDQogICAqLwoKICB0aGlzLnN1YnNjcmliZXIgPSBmdW5jdGlvbiAoc3RvcmUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoaGFuZGxlcikgewogICAgICByZXR1cm4gc3RvcmUuc3Vic2NyaWJlKGhhbmRsZXIpOwogICAgfTsKICB9OwoKICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnKSBvcHRpb25zID0ge307CiAgdGhpcy5rZXkgPSBvcHRpb25zLmtleSAhPSBudWxsID8gb3B0aW9ucy5rZXkgOiAndnVleCc7CiAgdGhpcy5zdWJzY3JpYmVkID0gZmFsc2U7CiAgdGhpcy5zdXBwb3J0Q2lyY3VsYXIgPSBvcHRpb25zLnN1cHBvcnRDaXJjdWxhciB8fCBmYWxzZTsKCiAgaWYgKHRoaXMuc3VwcG9ydENpcmN1bGFyKSB7CiAgICBGbGF0dGVkSlNPTiA9IHJlcXVpcmUoJ2ZsYXR0ZWQnKTsKICB9CgogIHRoaXMubWVyZ2VPcHRpb24gPSBvcHRpb25zLm1lcmdlT3B0aW9uIHx8ICdyZXBsYWNlQXJyYXlzJzsKICB2YXIgbG9jYWxTdG9yYWdlTGl0bXVzID0gdHJ1ZTsKCiAgdHJ5IHsKICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnJyk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBsb2NhbFN0b3JhZ2VMaXRtdXMgPSBmYWxzZTsKICB9CiAgLyoqDQogICAqIDEuIEZpcnN0LCBwcmVmZXIgc3RvcmFnZSBzZW50IGluIG9wdGlub3MNCiAgICogMi4gT3RoZXJ3aXNlLCB1c2Ugd2luZG93LmxvY2FsU3RvcmFnZSBpZiBhdmFpbGFibGUNCiAgICogMy4gRmluYWxseSwgdHJ5IHRvIHVzZSBNb2NrU3RvcmFnZQ0KICAgKiA0LiBOb25lIG9mIGFib3ZlPyBXZWxsIHdlIGdvdHRhIGZhaWwuDQogICAqLwoKCiAgaWYgKG9wdGlvbnMuc3RvcmFnZSkgewogICAgdGhpcy5zdG9yYWdlID0gb3B0aW9ucy5zdG9yYWdlOwogIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlTGl0bXVzKSB7CiAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlOwogIH0gZWxzZSBpZiAoTW9ja1N0b3JhZ2UpIHsKICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBNb2NrU3RvcmFnZSgpOwogIH0gZWxzZSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIk5laXRoZXIgJ3dpbmRvdycgaXMgZGVmaW5lZCwgbm9yICdNb2NrU3RvcmFnZScgaXMgYXZhaWxhYmxlIik7CiAgfQogIC8qKg0KICAgKiBIb3cgdGhpcyB3b3JrcyBpcyAtDQogICAqICAxLiBJZiB0aGVyZSBpcyBvcHRpb25zLnJlZHVjZXIgZnVuY3Rpb24sIHdlIHVzZSB0aGF0LCBpZiBub3Q7DQogICAqICAyLiBXZSBjaGVjayBvcHRpb25zLm1vZHVsZXM7DQogICAqICAgIDEuIElmIHRoZXJlIGlzIG5vIG9wdGlvbnMubW9kdWxlcyBhcnJheSwgd2UgdXNlIGVudGlyZSBzdGF0ZSBpbiByZWR1Y2VyDQogICAqICAgIDIuIE90aGVyd2lzZSwgd2UgY3JlYXRlIGEgcmVkdWNlciB0aGF0IG1lcmdlcyBhbGwgdGhvc2Ugc3RhdGUgbW9kdWxlcyB0aGF0IGFyZQ0KICAgKiAgICAgICAgZGVmaW5lZCBpbiB0aGUgb3B0aW9ucy5tb2R1bGVzW10gYXJyYXkNCiAgICogQHR5cGUgeygoc3RhdGU6IFMpID0+IHt9KSB8ICgoc3RhdGU6IFMpID0+IFMpIHwgKChzdGF0ZTogYW55KSA9PiB7fSl9DQogICAqLwoKCiAgdGhpcy5yZWR1Y2VyID0gb3B0aW9ucy5yZWR1Y2VyICE9IG51bGwgPyBvcHRpb25zLnJlZHVjZXIgOiBvcHRpb25zLm1vZHVsZXMgPT0gbnVsbCA/IGZ1bmN0aW9uIChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlOwogIH0gOiBmdW5jdGlvbiAoc3RhdGUpIHsKICAgIHJldHVybiBvcHRpb25zLm1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChhLCBpKSB7CiAgICAgIHJldHVybiBtZXJnZShhLCBfZGVmaW5lUHJvcGVydHkoe30sIGksIHN0YXRlW2ldKSwgX3RoaXMyLm1lcmdlT3B0aW9uKTsKICAgIH0sIHsKICAgICAgLyogc3RhcnQgZW1wdHkgYWNjdW11bGF0b3IqLwogICAgfSk7CiAgfTsKCiAgdGhpcy5maWx0ZXIgPSBvcHRpb25zLmZpbHRlciB8fCBmdW5jdGlvbiAobXV0YXRpb24pIHsKICAgIHJldHVybiB0cnVlOwogIH07CgogIHRoaXMuc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0TW9kZSB8fCBmYWxzZTsKCiAgdGhpcy5SRVNUT1JFX01VVEFUSU9OID0gZnVuY3Rpb24gUkVTVE9SRV9NVVRBVElPTihzdGF0ZSwgc2F2ZWRTdGF0ZSkgewogICAgdmFyIG1lcmdlZFN0YXRlID0gbWVyZ2Uoc3RhdGUsIHNhdmVkU3RhdGUgfHwge30sIHRoaXMubWVyZ2VPcHRpb24pOwoKICAgIGZvciAodmFyIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyhtZXJnZWRTdGF0ZSk7IF9pMiA8IF9PYmplY3Qka2V5czIubGVuZ3RoOyBfaTIrKykgewogICAgICB2YXIgcHJvcGVydHlOYW1lID0gX09iamVjdCRrZXlzMltfaTJdOwoKICAgICAgdGhpcy5fdm0uJHNldChzdGF0ZSwgcHJvcGVydHlOYW1lLCBtZXJnZWRTdGF0ZVtwcm9wZXJ0eU5hbWVdKTsKICAgIH0KICB9OwoKICB0aGlzLmFzeW5jU3RvcmFnZSA9IG9wdGlvbnMuYXN5bmNTdG9yYWdlIHx8IGZhbHNlOwoKICBpZiAodGhpcy5hc3luY1N0b3JhZ2UpIHsKICAgIC8qKg0KICAgICAqIEFzeW5jIHtAbGluayAjVnVleFBlcnNpc3RlbmNlLnJlc3RvcmVTdGF0ZX0gaW1wbGVtZW50YXRpb24NCiAgICAgKiBAdHlwZSB7KChrZXk6IHN0cmluZywgc3RvcmFnZT86IFN0b3JhZ2UpID0+DQogICAgICogICAgICAoUHJvbWlzZTxTPiB8IFMpKSB8ICgoa2V5OiBzdHJpbmcsIHN0b3JhZ2U6IEFzeW5jU3RvcmFnZSkgPT4gUHJvbWlzZTxhbnk+KX0NCiAgICAgKi8KICAgIHRoaXMucmVzdG9yZVN0YXRlID0gb3B0aW9ucy5yZXN0b3JlU3RhdGUgIT0gbnVsbCA/IG9wdGlvbnMucmVzdG9yZVN0YXRlIDogZnVuY3Rpb24gKGtleSwgc3RvcmFnZSkgewogICAgICByZXR1cm4gc3RvcmFnZS5nZXRJdGVtKGtleSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAvLyBJZiBzdHJpbmcsIHBhcnNlLCBvciBlbHNlLCBqdXN0IHJldHVybgogICAgICAgID8gX3RoaXMyLnN1cHBvcnRDaXJjdWxhciA/IEZsYXR0ZWRKU09OLnBhcnNlKHZhbHVlIHx8ICd7fScpIDogSlNPTi5wYXJzZSh2YWx1ZSB8fCAne30nKSA6IHZhbHVlIHx8IHt9OwogICAgICB9KTsKICAgIH07CiAgICAvKioNCiAgICAgKiBBc3luYyB7QGxpbmsgI1Z1ZXhQZXJzaXN0ZW5jZS5zYXZlU3RhdGV9IGltcGxlbWVudGF0aW9uDQogICAgICogQHR5cGUgeygoa2V5OiBzdHJpbmcsIHN0YXRlOiB7fSwgc3RvcmFnZT86IFN0b3JhZ2UpID0+DQogICAgICogICAgKFByb21pc2U8dm9pZD4gfCB2b2lkKSkgfCAoKGtleTogc3RyaW5nLCBzdGF0ZToge30sIHN0b3JhZ2U/OiBTdG9yYWdlKSA9PiBQcm9taXNlPHZvaWQ+KX0NCiAgICAgKi8KCiAgICB0aGlzLnNhdmVTdGF0ZSA9IG9wdGlvbnMuc2F2ZVN0YXRlICE9IG51bGwgPyBvcHRpb25zLnNhdmVTdGF0ZSA6IGZ1bmN0aW9uIChrZXksIHN0YXRlLCBzdG9yYWdlKSB7CiAgICAgIHJldHVybiBzdG9yYWdlLnNldEl0ZW0oa2V5LCAvLyBTZWNvbmQgYXJndW1lbnQgaXMgc3RhdGUgX29iamVjdF8gaWYgYXN5YyBzdG9yYWdlLCBzdHJpbmdpZmllZCBvdGhlcndpc2UKICAgICAgLy8gZG8gbm90IHN0cmluZ2lmeSB0aGUgc3RhdGUgaWYgdGhlIHN0b3JhZ2UgdHlwZSBpcyBhc3luYwogICAgICBfdGhpczIuYXN5bmNTdG9yYWdlID8gbWVyZ2Uoe30sIHN0YXRlIHx8IHt9LCBfdGhpczIubWVyZ2VPcHRpb24pIDogX3RoaXMyLnN1cHBvcnRDaXJjdWxhciA/IEZsYXR0ZWRKU09OLnN0cmluZ2lmeShzdGF0ZSkgOiBKU09OLnN0cmluZ2lmeShzdGF0ZSkpOwogICAgfTsKICAgIC8qKg0KICAgICAqIEFzeW5jIHZlcnNpb24gb2YgcGx1Z2luDQogICAgICogQHBhcmFtIHtTdG9yZTxTPn0gc3RvcmUNCiAgICAgKi8KCiAgICB0aGlzLnBsdWdpbiA9IGZ1bmN0aW9uIChzdG9yZSkgewogICAgICAvKioNCiAgICAgICAqIEZvciBhc3luYyBzdG9yZXMsIHdlJ3JlIGNhcHR1cmluZyB0aGUgUHJvbWlzZSByZXR1cm5lZA0KICAgICAgICogYnkgdGhlIGByZXN0b3JlU3RhdGUoKWAgZnVuY3Rpb24gaW4gYSBgcmVzdG9yZWRgIHByb3BlcnR5DQogICAgICAgKiBvbiB0aGUgc3RvcmUgaXRzZWxmLiBUaGlzIHdvdWxkIGFsbG93IGFwcCBkZXZlbG9wZXJzIHRvDQogICAgICAgKiBkZXRlcm1pbmUgd2hlbiBhbmQgaWYgdGhlIHN0b3JlJ3Mgc3RhdGUgaGFzIGluZGVlZCBiZWVuDQogICAgICAgKiByZWZyZXNoZWQuIFRoaXMgYXBwcm9hY2ggd2FzIHN1Z2dlc3RlZCBieSBHaXRIdWIgdXNlciBAaG90ZG9nZWUuDQogICAgICAgKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2NoYW1waW9uc3dpbW1lci92dWV4LXBlcnNpc3QvcHVsbC8xMTgjaXNzdWVjb21tZW50LTUwMDkxNDk2Mw0KICAgICAgICogQHNpbmNlIDIuMS4wDQogICAgICAgKi8KICAgICAgc3RvcmUucmVzdG9yZWQgPSBfdGhpczIucmVzdG9yZVN0YXRlKF90aGlzMi5rZXksIF90aGlzMi5zdG9yYWdlKS50aGVuKGZ1bmN0aW9uIChzYXZlZFN0YXRlKSB7CiAgICAgICAgLyoqDQogICAgICAgICAqIElmIGluIHN0cmljdCBtb2RlLCBkbyBvbmx5IHZpYSBtdXRhdGlvbg0KICAgICAgICAgKi8KICAgICAgICBpZiAoX3RoaXMyLnN0cmljdE1vZGUpIHsKICAgICAgICAgIHN0b3JlLmNvbW1pdCgnUkVTVE9SRV9NVVRBVElPTicsIHNhdmVkU3RhdGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdG9yZS5yZXBsYWNlU3RhdGUobWVyZ2Uoc3RvcmUuc3RhdGUsIHNhdmVkU3RhdGUgfHwge30sIF90aGlzMi5tZXJnZU9wdGlvbikpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLnN1YnNjcmliZXIoc3RvcmUpKGZ1bmN0aW9uIChtdXRhdGlvbiwgc3RhdGUpIHsKICAgICAgICAgIGlmIChfdGhpczIuZmlsdGVyKG11dGF0aW9uKSkgewogICAgICAgICAgICBfdGhpczIuX211dGV4LmVucXVldWUoX3RoaXMyLnNhdmVTdGF0ZShfdGhpczIua2V5LCBfdGhpczIucmVkdWNlcihzdGF0ZSksIF90aGlzMi5zdG9yYWdlKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5zdWJzY3JpYmVkID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9OwogIH0gZWxzZSB7CiAgICAvKioNCiAgICAgKiBTeW5jIHtAbGluayAjVnVleFBlcnNpc3RlbmNlLnJlc3RvcmVTdGF0ZX0gaW1wbGVtZW50YXRpb24NCiAgICAgKiBAdHlwZSB7KChrZXk6IHN0cmluZywgc3RvcmFnZT86IFN0b3JhZ2UpID0+DQogICAgICogICAgKFByb21pc2U8Uz4gfCBTKSkgfCAoKGtleTogc3RyaW5nLCBzdG9yYWdlOiBTdG9yYWdlKSA9PiAoYW55IHwgc3RyaW5nIHwge30pKX0NCiAgICAgKi8KICAgIHRoaXMucmVzdG9yZVN0YXRlID0gb3B0aW9ucy5yZXN0b3JlU3RhdGUgIT0gbnVsbCA/IG9wdGlvbnMucmVzdG9yZVN0YXRlIDogZnVuY3Rpb24gKGtleSwgc3RvcmFnZSkgewogICAgICB2YXIgdmFsdWUgPSBzdG9yYWdlLmdldEl0ZW0oa2V5KTsKCiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy8gSWYgc3RyaW5nLCBwYXJzZSwgb3IgZWxzZSwganVzdCByZXR1cm4KICAgICAgICByZXR1cm4gX3RoaXMyLnN1cHBvcnRDaXJjdWxhciA/IEZsYXR0ZWRKU09OLnBhcnNlKHZhbHVlIHx8ICd7fScpIDogSlNPTi5wYXJzZSh2YWx1ZSB8fCAne30nKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdmFsdWUgfHwge307CiAgICAgIH0KICAgIH07CiAgICAvKioNCiAgICAgKiBTeW5jIHtAbGluayAjVnVleFBlcnNpc3RlbmNlLnNhdmVTdGF0ZX0gaW1wbGVtZW50YXRpb24NCiAgICAgKiBAdHlwZSB7KChrZXk6IHN0cmluZywgc3RhdGU6IHt9LCBzdG9yYWdlPzogU3RvcmFnZSkgPT4NCiAgICAgKiAgICAgKFByb21pc2U8dm9pZD4gfCB2b2lkKSkgfCAoKGtleTogc3RyaW5nLCBzdGF0ZToge30sIHN0b3JhZ2U/OiBTdG9yYWdlKSA9PiBQcm9taXNlPHZvaWQ+KX0NCiAgICAgKi8KCiAgICB0aGlzLnNhdmVTdGF0ZSA9IG9wdGlvbnMuc2F2ZVN0YXRlICE9IG51bGwgPyBvcHRpb25zLnNhdmVTdGF0ZSA6IGZ1bmN0aW9uIChrZXksIHN0YXRlLCBzdG9yYWdlKSB7CiAgICAgIHJldHVybiBzdG9yYWdlLnNldEl0ZW0oa2V5LCAvLyBTZWNvbmQgYXJndW1lbnQgaXMgc3RhdGUgX29iamVjdF8gaWYgbG9jYWxmb3JhZ2UsIHN0cmluZ2lmaWVkIG90aGVyd2lzZQogICAgICBfdGhpczIuc3VwcG9ydENpcmN1bGFyID8gRmxhdHRlZEpTT04uc3RyaW5naWZ5KHN0YXRlKSA6IEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7CiAgICB9OwogICAgLyoqDQogICAgICogU3luYyB2ZXJzaW9uIG9mIHBsdWdpbg0KICAgICAqIEBwYXJhbSB7U3RvcmU8Uz59IHN0b3JlDQogICAgICovCgogICAgdGhpcy5wbHVnaW4gPSBmdW5jdGlvbiAoc3RvcmUpIHsKICAgICAgdmFyIHNhdmVkU3RhdGUgPSBfdGhpczIucmVzdG9yZVN0YXRlKF90aGlzMi5rZXksIF90aGlzMi5zdG9yYWdlKTsKCiAgICAgIGlmIChfdGhpczIuc3RyaWN0TW9kZSkgewogICAgICAgIHN0b3JlLmNvbW1pdCgnUkVTVE9SRV9NVVRBVElPTicsIHNhdmVkU3RhdGUpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0b3JlLnJlcGxhY2VTdGF0ZShtZXJnZShzdG9yZS5zdGF0ZSwgc2F2ZWRTdGF0ZSB8fCB7fSwgX3RoaXMyLm1lcmdlT3B0aW9uKSk7CiAgICAgIH0KCiAgICAgIF90aGlzMi5zdWJzY3JpYmVyKHN0b3JlKShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7CiAgICAgICAgaWYgKF90aGlzMi5maWx0ZXIobXV0YXRpb24pKSB7CiAgICAgICAgICBfdGhpczIuc2F2ZVN0YXRlKF90aGlzMi5rZXksIF90aGlzMi5yZWR1Y2VyKHN0YXRlKSwgX3RoaXMyLnN0b3JhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBfdGhpczIuc3Vic2NyaWJlZCA9IHRydWU7CiAgICB9OwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IFZ1ZXhQZXJzaXN0ZW5jZTsKZXhwb3J0IHsgTW9ja1N0b3JhZ2UsIFZ1ZXhQZXJzaXN0ZW5jZSB9Ow=="},{"version":3,"sources":["../../src/MockStorage.ts","../../src/SimplePromiseQueue.ts","../../src/utils.ts","../../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Created by championswimmer on 22/07/17.\n */\nlet MockStorage: typeof Storage | undefined\n\n// @ts-ignore\nif (process.env.MODULE_FORMAT !== 'umd') {\n  MockStorage = class implements Storage {\n    [index: number]: string;\n    [key: string]: any;\n\n    public get length(): number {\n      return Object.keys(this).length\n    }\n\n    public key(index: number): string | any {\n      return Object.keys(this)[index]\n    }\n\n    public setItem(key: string, data: any): void {\n      this[key] = data.toString()\n    }\n    public getItem(key: string): string {\n      return this[key]\n    }\n    public removeItem(key: string): void {\n      delete this[key]\n    }\n    public clear(): void {\n      for (let key of Object.keys(this)) {\n        delete this[key]\n      }\n    }\n  }\n}\n\nexport { MockStorage }\n","// tslint:disable: variable-name\nexport default class SimplePromiseQueue {\n  private readonly _queue: Array<Promise<void>> = []\n  private _flushing = false\n\n  public enqueue(promise: Promise<void>) {\n    this._queue.push(promise)\n    if (!this._flushing) { return this.flushQueue() }\n    return Promise.resolve()\n  }\n\n  private flushQueue() {\n    this._flushing = true\n\n    const chain = (): Promise<void> | void => {\n      const nextTask = this._queue.shift()\n      if (nextTask) {\n        return nextTask.then(chain)\n      } else {\n        this._flushing = false\n      }\n    }\n    return Promise.resolve(chain())\n  }\n}\n","import deepmerge from 'deepmerge'\n\nexport type MergeOptionType = 'replaceArrays' | 'concatArrays'\n\nconst options: {[k in MergeOptionType]: deepmerge.Options} = {\n  replaceArrays: {\n    arrayMerge: (destinationArray, sourceArray, options) => sourceArray\n  },\n  concatArrays: {\n    arrayMerge: (target, source, options) => target.concat(...source)\n  }\n}\n\nconst defaultMergeOptions: deepmerge.Options = {\n  // replacing arrays\n  \n}\n\nexport function merge<I, F>(into: Partial<I>, from: Partial<F>, mergeOption: MergeOptionType): I & F & {} {\n  return deepmerge(into, from, options[mergeOption])\n}\n","/**\n * Created by championswimmer on 18/07/17.\n */\nimport { Mutation, MutationPayload, Payload, Plugin, Store } from 'vuex'\nimport { AsyncStorage } from './AsyncStorage'\nimport { MockStorage } from './MockStorage'\nimport { PersistOptions } from './PersistOptions'\nimport SimplePromiseQueue from './SimplePromiseQueue'\nimport { merge, MergeOptionType } from './utils'\n\nlet FlattedJSON = JSON\n\n/**\n * A class that implements the vuex persistence.\n * @type S type of the 'state' inside the store (default: any)\n */\nexport class VuexPersistence<S> implements PersistOptions<S> {\n  public asyncStorage: boolean\n  public storage: Storage | AsyncStorage | undefined\n  public restoreState: (key: string, storage?: AsyncStorage | Storage) => Promise<S> | S\n  public saveState: (key: string, state: {}, storage?: AsyncStorage | Storage) => Promise<void> | void\n  public reducer: (state: S) => Partial<S>\n  public key: string\n  public filter: (mutation: Payload) => boolean\n  public modules: string[]\n  public strictMode: boolean\n  public supportCircular: boolean\n  public mergeOption: MergeOptionType\n\n  /**\n   * The plugin function that can be used inside a vuex store.\n   */\n  public plugin: Plugin<S>\n  /**\n   * A mutation that can be used to restore state\n   * Helpful if we are running in strict mode\n   */\n  public RESTORE_MUTATION: Mutation<S>\n  public subscribed: boolean\n\n  // tslint:disable-next-line:variable-name\n  private _mutex = new SimplePromiseQueue()\n\n  /**\n   * Create a {@link VuexPersistence} object.\n   * Use the <code>plugin</code> function of this class as a\n   * Vuex plugin.\n   * @param {PersistOptions} options\n   */\n  public constructor(options?: PersistOptions<S>) {\n    if (typeof options === 'undefined') options = {} as PersistOptions<S>\n    this.key = ((options.key != null) ? options.key : 'vuex')\n\n    this.subscribed = false\n    this.supportCircular = options.supportCircular || false\n    if (this.supportCircular) {\n      FlattedJSON = require('flatted')\n    }\n    this.mergeOption = options.mergeOption || 'replaceArrays'\n\n    let localStorageLitmus = true\n\n    try {\n      window.localStorage.getItem('')\n    } catch (err) {\n      localStorageLitmus = false\n    }\n\n    /**\n     * 1. First, prefer storage sent in optinos\n     * 2. Otherwise, use window.localStorage if available\n     * 3. Finally, try to use MockStorage\n     * 4. None of above? Well we gotta fail.\n     */\n    if (options.storage) { this.storage = options.storage }\n    else if (localStorageLitmus) { this.storage = window.localStorage }\n    else if (MockStorage) { this.storage = new MockStorage() }\n    else { throw new Error(\"Neither 'window' is defined, nor 'MockStorage' is available\") }\n\n    /**\n     * How this works is -\n     *  1. If there is options.reducer function, we use that, if not;\n     *  2. We check options.modules;\n     *    1. If there is no options.modules array, we use entire state in reducer\n     *    2. Otherwise, we create a reducer that merges all those state modules that are\n     *        defined in the options.modules[] array\n     * @type {((state: S) => {}) | ((state: S) => S) | ((state: any) => {})}\n     */\n    this.reducer = (\n      (options.reducer != null)\n        ? options.reducer\n        : (\n          (options.modules == null)\n            ? ((state: S) => state)\n            : (\n              (state: any) =>\n                (options!.modules as string[]).reduce((a, i) =>\n                  merge(a, { [i]: state[i] }, this.mergeOption), {/* start empty accumulator*/ })\n            )\n        )\n    )\n\n    this.filter = options.filter || ((mutation) => true)\n\n    this.strictMode = options.strictMode || false\n\n    this.RESTORE_MUTATION = function RESTORE_MUTATION(state: S, savedState: any) {\n      const mergedState = merge(state, savedState || {}, this.mergeOption)\n      for (const propertyName of Object.keys(mergedState as {})) {\n        (this as any)._vm.$set(state, propertyName, (mergedState as any)[propertyName])\n      }\n    }\n\n    this.asyncStorage = options.asyncStorage || false\n\n    if (this.asyncStorage) {\n\n      /**\n       * Async {@link #VuexPersistence.restoreState} implementation\n       * @type {((key: string, storage?: Storage) =>\n       *      (Promise<S> | S)) | ((key: string, storage: AsyncStorage) => Promise<any>)}\n       */\n      this.restoreState = (\n        (options.restoreState != null)\n          ? options.restoreState\n          : ((key: string, storage: AsyncStorage) =>\n            (storage).getItem(key)\n              .then((value) =>\n                typeof value === 'string' // If string, parse, or else, just return\n                  ? (\n                    this.supportCircular\n                      ? FlattedJSON.parse(value || '{}')\n                      : JSON.parse(value || '{}')\n                  )\n                  : (value || {})\n              )\n          )\n      )\n\n      /**\n       * Async {@link #VuexPersistence.saveState} implementation\n       * @type {((key: string, state: {}, storage?: Storage) =>\n       *    (Promise<void> | void)) | ((key: string, state: {}, storage?: Storage) => Promise<void>)}\n       */\n      this.saveState = (\n        (options.saveState != null)\n          ? options.saveState\n          : ((key: string, state: {}, storage: AsyncStorage) =>\n            (storage).setItem(\n              key, // Second argument is state _object_ if asyc storage, stringified otherwise\n              // do not stringify the state if the storage type is async\n              (this.asyncStorage\n                ? merge({}, state || {}, this.mergeOption)\n                : (\n                  this.supportCircular\n                    ? FlattedJSON.stringify(state) as any\n                    : JSON.stringify(state) as any\n                )\n              )\n            )\n          )\n      )\n\n      /**\n       * Async version of plugin\n       * @param {Store<S>} store\n       */\n      this.plugin = (store: Store<S>) => {\n        /**\n         * For async stores, we're capturing the Promise returned\n         * by the `restoreState()` function in a `restored` property\n         * on the store itself. This would allow app developers to\n         * determine when and if the store's state has indeed been\n         * refreshed. This approach was suggested by GitHub user @hotdogee.\n         * See https://github.com/championswimmer/vuex-persist/pull/118#issuecomment-500914963\n         * @since 2.1.0\n         */\n        (store as any).restored = ((this.restoreState(this.key, this.storage)) as Promise<S>).then((savedState) => {\n          /**\n           * If in strict mode, do only via mutation\n           */\n          if (this.strictMode) {\n            store.commit('RESTORE_MUTATION', savedState)\n          } else {\n            store.replaceState(merge(store.state, savedState || {}, this.mergeOption) as S)\n          }\n          this.subscriber(store)((mutation: MutationPayload, state: S) => {\n            if (this.filter(mutation)) {\n              this._mutex.enqueue(\n                this.saveState(this.key, this.reducer(state), this.storage) as Promise<void>\n              )\n            }\n          })\n          this.subscribed = true\n        })\n      }\n    } else {\n\n      /**\n       * Sync {@link #VuexPersistence.restoreState} implementation\n       * @type {((key: string, storage?: Storage) =>\n       *    (Promise<S> | S)) | ((key: string, storage: Storage) => (any | string | {}))}\n       */\n      this.restoreState = (\n        (options.restoreState != null)\n          ? options.restoreState\n          : ((key: string, storage: Storage) => {\n            const value = (storage).getItem(key)\n            if (typeof value === 'string') {// If string, parse, or else, just return\n              return (\n                this.supportCircular\n                  ? FlattedJSON.parse(value || '{}')\n                  : JSON.parse(value || '{}')\n              )\n            } else {\n              return (value || {})\n            }\n          })\n      )\n\n      /**\n       * Sync {@link #VuexPersistence.saveState} implementation\n       * @type {((key: string, state: {}, storage?: Storage) =>\n       *     (Promise<void> | void)) | ((key: string, state: {}, storage?: Storage) => Promise<void>)}\n       */\n      this.saveState = (\n        (options.saveState != null)\n          ? options.saveState\n          : ((key: string, state: {}, storage: Storage) =>\n            (storage).setItem(\n              key, // Second argument is state _object_ if localforage, stringified otherwise\n              (\n                this.supportCircular\n                  ? FlattedJSON.stringify(state) as any\n                  : JSON.stringify(state) as any\n              )\n            )\n          )\n      )\n\n      /**\n       * Sync version of plugin\n       * @param {Store<S>} store\n       */\n      this.plugin = (store: Store<S>) => {\n        const savedState = this.restoreState(this.key, this.storage) as S\n\n        if (this.strictMode) {\n          store.commit('RESTORE_MUTATION', savedState)\n        } else {\n          store.replaceState(merge(store.state, savedState || {}, this.mergeOption) as S)\n        }\n\n        this.subscriber(store)((mutation: MutationPayload, state: S) => {\n          if (this.filter(mutation)) {\n            this.saveState(this.key, this.reducer(state), this.storage)\n          }\n        })\n\n        this.subscribed = true\n      }\n    }\n  }\n\n  /**\n   * Creates a subscriber on the store. automatically is used\n   * when this is used a vuex plugin. Not for manual usage.\n   * @param store\n   */\n  private subscriber = (store: Store<S>) =>\n    (handler: (mutation: MutationPayload, state: S) => any) => store.subscribe(handler)\n}\n\nexport {\n  MockStorage, AsyncStorage, PersistOptions\n}\n\nexport default VuexPersistence\n"]}]}